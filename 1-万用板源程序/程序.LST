C51 COMPILER V9.00   ³ÌÐò                                                                  06/15/2015 22:16:47 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE ³ÌÐò
OBJECT MODULE PLACED IN ³ÌÐò.OBJ
COMPILER INVOKED BY: D:\keil4\C51\BIN\C51.EXE ³ÌÐò.c DEBUG OBJECTEXTEND

line level    source

   1          //³ÌÐòÍ·º¯Êý
   2          #include <reg52.h>
   3          
   4          //ºê¶¨Òå
   5          #define uint unsigned int 
   6          #define uchar unsigned char
   7          #define Data_ADC0809 P1            //¶¨ÒåP1¿ÚÎªData_ADC0809
   8           
   9          //¹Ü½ÅÉùÃ÷
  10          sbit jdq=P3^0;                     //¼ÌµçÆ÷
  11          sbit Feng = P3^1;                  //·äÃùÆ÷
  12          //ADC0809
  13          sbit ST=P3^3;
  14          sbit EOC=P3^4;
  15          sbit OE=P3^2;
  16          //°´¼ü
  17          sbit Key1=P3^5;
  18          sbit Key2=P3^6;
  19          sbit Key3=P3^7;
  20          bit shan=0;                                //ÉÁË¸±êÖ¾Î»
  21          
  22          //ÏÔÊ¾Êý×é              0-9+F
  23          uchar Data_[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x71,0x3f};     //¹²ÒõÏÔÊ¾Êý×é
  24          sbit Wei1 = P2^7;
  25          sbit Wei2 = P2^6;
  26          sbit Wei3 = P2^5;
  27          sbit Wei4 = P2^4;                                //ËÄ¸öÊýÂë¹ÜµÄÎ»Ñ¡¶Ë¿Ú
  28          //º¯ÊýÉùÃ÷
  29          extern uchar ADC0809();
  30          void Display(uchar X,uchar Data);
  31          void delay(uint t);
  32          
  33          //¾Æ¾«º¬Á¿±äÁ¿
  34          uchar temp=0;
  35          //·äÃùÆ÷±äÁ¿
  36          uchar FF=10;
  37          //ÏÔÊ¾Ä£Ê½
  38          uchar Mode=0;
  39          uchar p;
  40          
  41          void main()                               //Ö÷º¯Êý
  42          {
  43   1              TH0=0x3c;
  44   1              TL0=0xb0;//¸³³õÖµ50ms
  45   1              TMOD=0x01;//ÉèÖÃ¹¤×÷·½Ê½
  46   1              EA=1;//´ò¿ªÖÐ¶Ï×Ü¿ª¹Ø
  47   1              ET0=1;//´ò¿ªÔÊÐí¿ª¹Ø
  48   1              TR0=1;  //´ò¿ª¶¨Ê±Æ÷¶¨Ê±¿ª¹Ø
  49   1              while(1)           //½øÈëÑ­»·£¬À¨ºÅÄÚÎª1£¬ËùÒÔ³ÌÐò½øÈëÑ­»·¾Í²»»á³öÀ´ÁË£¬ËùÒÔ¾Í½ÐËÀÑ­»·
  50   1              {
  51   2                      //Õý³£Ä£Ê½
  52   2                      if(Mode==0)
  53   2                      {
  54   3                              //¶ÁÈ¡ADÖµ
  55   3                              temp=ADC0809();
C51 COMPILER V9.00   ³ÌÐò                                                                  06/15/2015 22:16:47 PAGE 2   

  56   3                              for(p=0;p<30;p++)          //µ÷ÓÃÈýÊ®´ÎÏÔÊ¾º¯Êý
  57   3                              Display(0,temp);
  58   3                              //ÅÐ¶ÏÊÇ·ñ±¨¾¯
  59   3                              if(temp>FF)                                //´óÓÚ±¨¾¯Öµ
  60   3                              {
  61   4                                      jdq=0;                                  //¼ÌµçÆ÷ÎüºÍ
  62   4                              }
  63   3                              if((shan==1)&&(temp>FF))   //ÉÁË¸±äÁ¿Îª1Ê±²¢ÇÒ´óÓÚ±¨¾¯Öµ
  64   3                              {
  65   4                                      Feng=0;                            //·äÃùÆ÷Ïì
  66   4                              }
  67   3                              if(shan==0)                                //ÉÁË¸±äÁ¿Îª0Ê±
  68   3                              {
  69   4                                      Feng=1;                            //¹Ø±Õ·äÃùÆ÷
  70   4                              }                                                                  //£¨ÉÁË¸±äÁ¿shanÊÜ¶¨Ê±Æ÷¿ØÖÆ£¬500msÈ¡·´Ò»´Î£¬´ïµ½1ÃëÏìÒ»ÏÂµÄÐ§¹û£©
  71   3                              if(temp<=FF)                       //Ð¡ÓÚ±¨¾¯ÖµÊ±
  72   3                              {
  73   4                                      Feng=1;                            //¹Ø±Õ·äÃùÆ÷ºÍ¼ÌµçÆ÷
  74   4                                      jdq=1;
  75   4                              }
  76   3                      }
  77   2                      //µ÷ÕûÄ£Ê½
  78   2                      else
  79   2                      {
  80   3                              Display(1,FF);          //ÏÔÊ¾±¨¾¯Öµ½çÃæ
  81   3                      }
  82   2                      //¹¦ÄÜ¼ü
  83   2                      if(Key3==0)                                //ÉèÖÃ¼ü°´ÏÂ£¨°´¼üÒ»¶Ë½ÓµØ£¬Ò»¶Ë½Óµ¥Æ¬»úIO¿Ú£¬µ±°´¼ü°´ÏÂÊ±£¬µ¥Æ¬»úµÄIO¿Ú¾Í»á¼ì²âµ½µÍµç
             -Æ½£©
  84   2                      {
  85   3                              Feng=0;                                 //·äÃùÆ÷Ïì
  86   3                              jdq=1;                                   //¶Ï¿ª¼ÌµçÆ÷
  87   3                              delay(100);                             //ÑÓÊ±È¥¶¶
  88   3                              while(Key3==0)                  //ÅÐ¶Ï°´¼üÊÇ·ñ°´ÏÂ
  89   3                              {
  90   4                                      if(Mode==0)                     //Õý³£Ä£Ê½
  91   4                                              Display(0,temp);//ÏÔÊ¾Õý³£½çÃæ  
  92   4                                      else                            //ÉèÖÃ±¨¾¯Öµ
  93   4                                              Display(1,FF);  //ÏÔÊ¾±¨¾¯Öµ½çÃæ                                                                
  94   4                              }
  95   3                              if(Mode==0)                             //Èç¹ûÊÇÕý³£Ä£Ê½£¬°´ÏÂÉèÖÃ¼ü£¬¾ÍÇÐ»»µ½ÉèÖÃÄ£Ê½
  96   3                                      Mode=1;
  97   3                              else                                    //Èç¹ûÊÇÉèÖÃÄ£Ê½£¬°´ÏÂÉèÖÃ¼ü£¬¾ÍÇÐ»»µ½Õý³£Ä£Ê½
  98   3                                      Mode=0;
  99   3                              Feng=1;                                 //¹Ø±Õ·äÃùÆ÷
 100   3                      }
 101   2                      //Ôö¼Ó
 102   2                      if(Key2==0&&Mode==1)            //¼Ó¼ü°´ÏÂ
 103   2                      {
 104   3                              Feng=0;                                 //·äÃùÆ÷Ïì
 105   3                              delay(100);
 106   3                              while(Key2==0)
 107   3                              {
 108   4                                              Display(1,FF);  //ÏÔÊ¾ÉèÖÃ½çÃæ                                                          
 109   4                              }
 110   3                              FF++;                                   //±¨¾¯Öµ¼Ó
 111   3                              if(FF>=251)                             //×î´ó¼Óµ½250
 112   3                                      FF=250; 
 113   3                              Feng=1;                                 //¹Ø±Õ·äÃùÆ÷
 114   3                      }
 115   2                      //¼õÉÙ
 116   2                      if(Key1==0&&Mode==1)            //¼õ°´¼ü°´ÏÂ£¬×¢ÊÍ²Î¿¼¼Ó°´¼ü×¢ÊÍ
C51 COMPILER V9.00   ³ÌÐò                                                                  06/15/2015 22:16:47 PAGE 3   

 117   2                      {
 118   3                              Feng=0;
 119   3                              delay(100);
 120   3                              while(Key1==0)
 121   3                              {
 122   4                                              Display(1,FF);                                                                  
 123   4                              }
 124   3                              FF--;
 125   3                              if(FF==0xff)                    //±¨¾¯Öµ¼õµ½Ð¡ÓÚ0
 126   3                                      FF=0;                           //×îÐ¡Öµ¾ÍÊÇ0
 127   3                              Feng=1;
 128   3                      }
 129   2              }
 130   1      }
 131          //ADC0809¶ÁÈ¡ÐÅÏ¢
 132          uchar ADC0809()
 133          {
 134   1              uchar temp_=0x00;
 135   1              //³õÊ¼»¯¸ß×èÌ«
 136   1              OE=0;
 137   1              //×ª»¯³õÊ¼»¯
 138   1              ST=0;
 139   1              //¿ªÊ¼×ª»»
 140   1              ST=1;
 141   1              ST=0;
 142   1              //Íâ²¿ÖÐ¶ÏµÈ´ýAD×ª»»½áÊø
 143   1              while(EOC==0)
 144   1              //¶ÁÈ¡×ª»»µÄADÖµ
 145   1              OE=1;
 146   1              temp_=Data_ADC0809;
 147   1              OE=0;
 148   1              return temp_;
 149   1      }
 150          //ÑÓÊ±
 151          void delay(uint t)
 152          {
 153   1              uint i,j;
 154   1              for(i=0;i<t;i++)
 155   1                      for(j=0;j<10;j++);
 156   1      }
 157          
 158          //ÏÔÊ¾       X±íÊ¾×´Ì¬     Data±íÊ¾Êý¾Ý
 159          void Display(uchar X,uchar Data)
 160          {
 161   1              Wei1=1;
 162   1              Wei2=1;
 163   1              Wei3=1;
 164   1              Wei4=1;
 165   1              P0=0xff;                        //¹Ø±ÕÏÔÊ¾
 166   1      
 167   1              //Õý³£Ä£Ê½
 168   1              if(X==0)
 169   1              {
 170   2                      P0=~Data_[11];   //ÏÔÊ¾¿Õ£¬Ò²¾ÍÊÇÕý³£Ä£Ê½Ê±£¬µÚÒ»¸öÎ»ÖÃÊÇ²»ÏÔÊ¾ÄÚÈÝµÄ
 171   2              }
 172   1              //·ÇÕý³£
 173   1              else                             
 174   1              {
 175   2                      P0=~Data_[10];   //ÉèÖÃÄ£Ê½£¬µÚÒ»Î»ÏÔÊ¾×ÖÄ¸F
 176   2              }
 177   1              Wei1=0;                          //Ñ¡ÖÐµÚÒ»Î»£¬ÆäËûÎ»¹Ø±Õ
 178   1              Wei2=1;
C51 COMPILER V9.00   ³ÌÐò                                                                  06/15/2015 22:16:47 PAGE 4   

 179   1              Wei3=1;
 180   1              Wei4=1;
 181   1              delay(10);                       //ÑÓÊ±
 182   1              Wei1=1;                          //¹Ø±ÕËùÓÐÎ»
 183   1              Wei2=1;
 184   1              Wei3=1;
 185   1              Wei4=1;
 186   1      
 187   1              P0=~Data_[Data/100]; //ÏÔÊ¾ÊýÖµµÄ°ÙÎ»£¬ÀýÈçÊý¾ÝÊÇ123£¬³ýÒÔ100µÄÉÌÊÇ1£¬ÕâÀïÏÔÊ¾µÄ¾ÍÊÇÊý×Ö1
 188   1              Wei1=1;
 189   1              Wei2=0;                          //Ñ¡ÖÐµÚ¶þÎ»
 190   1              Wei3=1;
 191   1              Wei4=1;
 192   1              delay(10);                       //ÑÓÊ±
 193   1              Wei1=1;                          //¹Ø±ÕËùÓÐÎ»
 194   1              Wei2=1;
 195   1              Wei3=1;
 196   1              Wei4=1;
 197   1      
 198   1      
 199   1              P0=~Data_[Data%100/10];//ÏÔÊ¾ÊýÖµµÄÊ®Î»£¬ÊýÖµÊÇ123£¬È¡ÓàµÄ×÷ÓÃ¾ÍÊÇ³ýÒÔ100ºóµÄÓàÊý£¬ÊÇ23,23ÔÙ³ýÒÔ10µÃµ½µÄÉ
             -ÌÊÇ2£¬ÕâÀïÏÔÊ¾µÄ¾ÍÊÇ2
 200   1              Wei1=1;
 201   1              Wei2=1;
 202   1              Wei3=0;
 203   1              Wei4=1;
 204   1              delay(10);
 205   1              Wei1=1;
 206   1              Wei2=1;
 207   1              Wei3=1;
 208   1              Wei4=1;
 209   1      
 210   1              P0=~Data_[Data%10];       //ÏÔÊ¾ÊýÖµµÄ¸öÎ»£¬ÊýÖµÊÇ123£¬È¡Óà10¾ÍÊÇÊýÖµ³ýÒÔ10µÄÓàÊý¾ÍÊÇ3£¬ÕâÀïÏÔÊ¾µÄ¾ÍÊÇ3
 211   1              Wei1=1;
 212   1              Wei2=1;
 213   1              Wei3=1;
 214   1              Wei4=0;
 215   1              delay(10);
 216   1              Wei1=1;
 217   1              Wei2=1;
 218   1              Wei3=1;
 219   1              Wei4=1;
 220   1      
 221   1      }
 222          void time0() interrupt 1//¶¨Ê±Æ÷º¯Êý
 223          {
 224   1              uchar m;
 225   1              TH0=0x3c;
 226   1              TL0=0xb0;//ÖØÐÂ¸³³õÖµ
 227   1              m++;      //¶¨Ê±Æ÷½øÈëÒ»´ÎÊÇ50ms£¬m¼ÓÒ»´Î
 228   1              if(m==10)  //¼Ó10´Î£¬Ò²¾ÍÊÇ500ms
 229   1              {
 230   2                      shan=~shan;       //¿ØÖÆshan±äÁ¿È¡·´£¬¾ÍÊÇ0±ä1,1±ä0
 231   2                      m=0;              //mÇåÁã
 232   2              }
 233   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    456    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.00   ³ÌÐò                                                                  06/15/2015 22:16:47 PAGE 5   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
